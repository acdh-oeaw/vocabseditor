!function(t){function i(t){t+="";var i=t[0].toUpperCase();return i+t.substr(1)}function s(i){this.settings=t.extend(!0,{},s.defaultSettings,i),this._init(),e=this}var e,r="apst-",o="apst",l="apst";String.prototype.ucfirst||(String.prototype.ucfirst=function(){return i(this)}),s.prototype={_init:function(){this._addScrollTopElement(),this._registerScrollEvent(),this._updateCssClasses(),this._updatePosition(),this._updateScrollElementVisibility(),this._trigger("init")},_addScrollTopElement:function(){var i=this;"function"==typeof this.settings.customButton?this._scrollTopWrapper=this.settings.customButton(this.settings):(this._scrollTopWrapper=t("<div></div>",{"class":r+"wrapper"}),this._scrollTopButton=t("<div></div>",{"class":r+"button"}),this._scrollTopWrapper.append(this._scrollTopButton)),this._scrollTopWrapper.data("visible",!1),t("body").append(this._scrollTopWrapper);var s=this._getButton();s.on("click."+o,function(){i.scrollTo()})},_getButton:function(){var t=this._scrollTopWrapper.find("."+r+"button");return 0==t.length&&(t=this._scrollTopWrapper),t},_registerScrollEvent:function(){var i=this;t(document).ready(function(){t(window).scroll(function(t){i._updateScrollElementVisibility()})})},_updateScrollElementVisibility:function(){var t=this;this.settings.enabled&&this._isVisible()&&!this._scrollTopWrapper.data("visible")?(this._scrollTopWrapper.stop(!0,!1).fadeIn(this.settings.visibilityFadeSpeed,function(){t._updateCssClasses(),t._trigger("toggle",{visible:!0})}),this._scrollTopWrapper.data("visible",!0)):(!this._isVisible()&&this._scrollTopWrapper.data("visible")||!this.settings.enabled)&&(this._scrollTopWrapper.stop(!0,!1).fadeOut(this.settings.visibilityFadeSpeed,function(){t._updateCssClasses(),t._trigger("toggle",{visible:!1})}),this._scrollTopWrapper.data("visible",!1))},_isVisible:function(){var i=t(window).scrollTop();if("function"==typeof this.settings.visibilityTrigger)return this.settings.visibilityTrigger(i);var s=parseInt(this.settings.visibilityTrigger);return i>=s},_updateCssClasses:function(){if(this.settings.enabled?(this._scrollTopWrapper.addClass(r+"enabled"),this._scrollTopWrapper.removeClass(r+"disabled")):(this._scrollTopWrapper.addClass(r+"disabled"),this._scrollTopWrapper.removeClass(r+"enabled")),this._scrollTopWrapper.data("visible")?(this._scrollTopWrapper.addClass(r+"visible"),this._scrollTopWrapper.removeClass(r+"hidden")):(this._scrollTopWrapper.addClass(r+"hidden"),this._scrollTopWrapper.removeClass(r+"visible")),"string"==typeof this.settings.theme||this.settings.theme.length>0){var t=r+"theme-"+this.settings.theme;this._scrollTopWrapper.hasClass(t)||this._scrollTopWrapper.addClass(t)}this._trigger("cssClassesUpdated")},_updatePosition:function(){var t=["top","bottom","left","center","right"];if("string"==typeof this.settings.position){var i=this.settings.position.split(" ");for(index in i){var s=i[index].trim();t.indexOf(s)>-1&&this._scrollTopWrapper.addClass(r+i[index])}this._trigger("positionUpdated")}},_trigger:function(i,s){var e="on"+i.ucfirst(),r=this.settings[e];"function"==typeof r&&r.apply(t(this),s),i=l+i.ucfirst(),t(this).trigger(i,s)},_triggerHandler:function(i,s){var e,r="on"+i.ucfirst(),o=this.settings[r],n=void 0;return"function"==typeof o&&(n=o.apply(t(this),s)),i=l+i.ucfirst(),e=void 0!==(e=t(this).triggerHandler(i,s))?e:n},enable:function(){this.settings.enabled||(this.settings.enabled=!0,this._updateCssClasses(),this._updateScrollElementVisibility(),this._trigger("enabled"))},disable:function(){this.settings.enabled&&(this.settings.enabled=!1,this._updateCssClasses(),this._updateScrollElementVisibility(),this._trigger("disabled"))},scrollTo:function(i,s){var e=this;i=void 0!=i?i:0,s=s?s:this.settings.scrollSpeed;var r=this._triggerHandler("beforeScrollTo",{position:i,speed:s});"number"==typeof r?i=parseInt(r):"object"==typeof r&&(r.position&&(i=parseInt(r.position)),r.speed&&(s=parseInt(r.speed))),t("html, body").animate({scrollTop:i},s,function(){e._trigger("scrolledTo",{position:i})})},option:function(i,s){if(!i)return t.extend({},this.settings);var e;if("string"==typeof i){if(1===arguments.length)return void 0!==this.settings[i]?this.settings[i]:null;e={},e[i]=s}else e=i;this._setOptions(e)},_setOptions:function(t){for(key in t){var i=t[key];if("position"==key&&this._scrollTopWrapper.removeClass(r+"top "+r+"bottom "+r+"left "+r+"center "+r+"right"),"theme"==key){var s=r+"theme-"+this.settings.theme;this._scrollTopWrapper.hasClass(s)&&this._scrollTopWrapper.removeClass(s)}this.settings[key]=i,["enabled","visibilityTrigger","theme"].indexOf(key)>-1&&this._updateCssClasses(),["enabled","visibilityTrigger"].indexOf(key)>-1&&this._updateScrollElementVisibility(),["position"].indexOf(key)>-1&&this._updatePosition()}},destroy:function(){this._trigger("destroy"),this._getButton().off("click."+o),this._scrollTopWrapper.remove()}},t.apScrollTop=function(i){if(e||new s(i),"string"==typeof i){var r,o,l=Array.prototype.slice.call(arguments,1);if("function"==typeof(r=e[i])&&"_"!==i.charAt(0))return o=r.apply(e,l),void 0!==o?o:t(e)}return t(e)},s.defaultSettings={enabled:!0,visibilityTrigger:100,visibilityFadeSpeed:150,scrollSpeed:250,position:"right bottom",customButton:void 0,theme:"default"}}(jQuery);